
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="pricer application">
    <meta name="author" content="sky">

    <title>Scripting</title>

    <script src="https://use.fontawesome.com/818d94916d.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.3/jquery.min.js"></script>
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

    <link href="css/add-gears.css" rel="stylesheet">
</head>

<body>

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            
            <a href="index.html" style="float:left;padding: 0 10px;"><img class="img-responsive" src="logo.png"></a>
            <a class="navbar-brand" href="index.html">AddGears</a>
        </div>

        
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="getting-started.html">Getting started </a></li>
                <li><a href="docs/api.html">API </a></li>
            </ul>
        </div>
        
    </div>
    
</nav>


<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.3.0/styles/default.min.css">
<div class="section"><div class="container">
<h1>Scripting</h1>

<p>AddPricer has a scripting language built in, which we call Clef and which is
executed using a <code>&lt;clef&gt;</code> component. The goal is to provide means to evaluate simple
mathematical expressions and control statements while making syntax similar to the
syntax of a Google Go language. The later allows quick conversion between scripts
and a Go language code in cases for the sake of performance or when access to tools
and wider community is desired.</p>

<pre><code class="language-xml">&lt;!-- iterate over &quot;data&quot; array  --&gt;
&lt;each path=&quot;data&quot;&gt;
    &lt;!-- conditionally change the value of &quot;num&quot; property --&gt;
    &lt;clef&gt;
        if rating &gt; 1000 &amp;&amp; number &lt; 4 {
            number += 2
        }
    &lt;/clef&gt;
&lt;/each&gt;
</code></pre>

<p>Scripts inside <code>&lt;clef&gt;</code> components have access to all namespace variables. You may assign
values to new properties and you can use common control statements. There is only one global scope,
associated with the current namespace.</p>

<p>In contrast to GO, Clef is a dynamically-typed language. To simplify common scripting tasks,
it also has &ldquo;matches regular expression&rdquo; operator &ldquo;~&rdquo; (and opposite &ldquo;!~&ldquo;) and follows Javascript
conventions when converting values to booleans (0, empty string and nil are treated
as false and all other values as true).</p>

<p>Clef parser is also used in other components, including <code>&lt;array&gt;</code> (<code>&lt;filter&gt;</code> expressions
and <code>&lt;expression&gt;</code> subcomponent) and <code>&lt;if&gt;</code> (when &ldquo;e&rdquo; attribute was given) components. As it
is an interpreted language, excessive use of Clef may have adverse effects on performance, and
alternative approaches could be preferred.</p>

</div></div>
<script src="//cdn.jsdelivr.net/highlight.js/9.3.0/highlight.min.js"></script>
<script>
hljs.initHighlightingOnLoad();
</script>

<script src="js/modern-business.js"></script>


</body>

</html>


